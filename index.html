
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Quiz Entre Potes</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      max-width: 100vw;
      overflow-x: hidden;
      background-color: #121212;
      color: #f0f0f0;
    }

    h1 {
      font-size: 1.8em;
      margin-bottom: 10px;
      color: #ffffff;
    }

    #quizQuestion {
      font-size: 1.3em;
      margin: 20px auto;
      max-width: 90%;
      line-height: 1.5;
      word-break: break-word;
      overflow-wrap: break-word;
      white-space: normal;
      color: #e0e0e0;
    }

    #quizAnswers {
      margin-top: 20px;
    }

    #quizAnswers button {
      display: block;
      margin: 10px auto;
      padding: 12px 24px;
      font-size: 16px;
      width: 80%;
      max-width: 300px;
      border-radius: 6px;
      word-break: break-word;
      white-space: normal;
      background-color: #1f1f1f;
      color: #fff;
      border: 2px solid #333;
      transition: all 0.2s ease-in-out;
    }

    #quizAnswers button:hover {
      background-color: #2c2c2c;
      transform: scale(1.02);
    }

    #quizAnswers button:active {
      transform: scale(0.98);
      background-color: #3a3a3a;
    }

    #quizAnswers button.correct {
      background-color: #2e7d32 !important;
      color: white;
      border: none;
    }

    #quizAnswers button.incorrect {
      background-color: #c62828 !important;
      color: white;
      border: none;
    }

    #nextBtn {
      margin: 30px auto 10px;
      padding: 10px 20px;
      font-size: 16px;
      display: block;
      border-radius: 6px;
      max-width: 300px;
      background-color: #1976d2;
      color: white;
      border: none;
      transition: all 0.2s ease-in-out;
    }

    #nextBtn:hover {
      background-color: #1565c0;
      transform: scale(1.03);
    }

    #result {
      margin-top: 20px;
      font-size: 1.2em;
      max-width: 90%;
      margin-left: auto;
      margin-right: auto;
      color: #bbb;
    }

    footer {
      margin-top: 50px;
      font-size: 0.8em;
      color: #777;
    }

    @media (max-width: 600px) {
      h1 {
        font-size: 1.5em;
      }

      #quizQuestion {
        font-size: 1.1em;
      }

      #quizAnswers button {
        font-size: 15px;
        padding: 10px;
      }

      #nextBtn {
        font-size: 15px;
        padding: 10px 18px;
      }
    }
  </style>
</head>
<body>
  <h1 id="titre"></h1>
  <p><em id="sousTitre"></em></p>

  <h2 id="quizQuestion">Chargement‚Ä¶</h2>
  <div id="quizAnswers"></div>
  <button id="nextBtn" onclick="nextQuestion()" style="display: none;">Suivant</button>
  <div id="result"></div>

  <footer>rev.0.10</footer>

  <script>
    const noms = ["Thomas", "Simon", "Vladimir", "Alexis", "Ludovic", "Sacha", "Maxence", "Le zinc"];
    const scriptURL = "https://virnichka.github.io/Pirates/questions.json";

    const titres = [
      "Le Grand Quiz de la Honte",
      "La Roue de la D√©g√©n√©rescence",
      "Les Secrets Qu'on N'aurait Jamais D√ª R√©v√©ler",
      "Le Tribunal des Potes",
      "Le Jeu Qui Va Te Griller √† Vie"
    ];

    const sousTitres = [
      "R√©ponds sans trembler, t‚Äôes peut-√™tre la prochaine question du quiz...",
      "Rira bien qui rira le dernier (spoiler : ce sera pas toi).",
      "Certains souvenirs devraient rester enterr√©s... mais pas aujourd‚Äôhui.",
      "Tu pensais qu‚Äôon avait oubli√© ? Erreur.",
      "Allez, balance la v√©rit√©, le monde veut savoir.",
      "Le moment de honte vaut mieux qu'une minute de silence.",
      "Trop tard pour faire marche arri√®re.",
      "Si t‚Äôas pas honte, c‚Äôest qu‚Äôon a oubli√© un truc."
    ];

    let questions = [];
    let shuffledQuestions = [];
    let currentQuestionIndex = 0;
    let score = 0;

    function afficherAccroches() {
      const titre = titres[Math.floor(Math.random() * titres.length)];
      const sousTitre = sousTitres[Math.floor(Math.random() * sousTitres.length)];
      document.getElementById("titre").innerText = titre;
      document.getElementById("sousTitre").innerText = sousTitre;
    }

    async function chargerQuestions() {
      try {
        const response = await fetch(scriptURL);
        const data = await response.json();
        questions = data;
        shuffledQuestions = questions.sort(() => Math.random() - 0.5);
        showQuestion();
      } catch (error) {
        console.error("Erreur de chargement :", error);
        document.getElementById("quizQuestion").innerText = "Erreur de chargement du quiz.";
      }
    }

    function getRandomNames(exclude) {
      const autres = noms.filter(n => n !== exclude);
      return autres.sort(() => Math.random() - 0.5).slice(0, 3);
    }

    function shuffle(array) {
      return array.sort(() => Math.random() - 0.5);
    }

    function showQuestion() {
      const current = shuffledQuestions[currentQuestionIndex];
      document.getElementById("quizQuestion").innerText = current.question;

      const shuffledAnswers = shuffle([
        current.correct,
        ...getRandomNames(current.correct)
      ]);

      const answersContainer = document.getElementById("quizAnswers");
      answersContainer.innerHTML = "";

      shuffledAnswers.forEach(answer => {
        const button = document.createElement("button");
        button.innerText = answer;
        button.className = "answerBtn";
        button.onclick = () => checkAnswer(answer, current.correct);
        answersContainer.appendChild(button);
      });

      document.getElementById("nextBtn").style.display = "none";
    }

    function checkAnswer(selected, correct) {
      const buttons = document.querySelectorAll(".answerBtn");
      buttons.forEach(btn => {
        btn.disabled = true;
        if (btn.innerText === correct) {
          btn.classList.add("correct");
        } else if (btn.innerText === selected) {
          btn.classList.add("incorrect");
        }
      });

      if (selected === correct) {
        score++;
      }

      document.getElementById("nextBtn").style.display = "block";
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex < shuffledQuestions.length) {
        showQuestion();
      } else {
        showFinalScore();
      }
    }

    function showFinalScore() {
      const commentaires = [
        "Z√©ro point√©. T'es s√ªr que tu fais partie du groupe ? üòÖ",
        "Une seule bonne r√©ponse‚Ä¶ √áa sent le d√©ni ou l'amn√©sie s√©lective.",
        "Deux bonnes r√©ponses. Tu veux qu'on te rafra√Æchisse la m√©moire ?",
        "Trois ? Tu connais juste les potins les plus √©vidents.",
        "Quatre. Tu sauves l'honneur‚Ä¶ de justesse.",
        "Cinq bonnes r√©ponses ! Pas mal, t'as bien suivi les histoires.",
        "Six ? On sent que t'as pris des notes dans l‚Äôombre.",
        "Sept ? T'es clairement une comm√®re premium.",
        "Huit sur huit ? Tu ES la honte collective incarn√©e."
      ];

      const commentaire = commentaires[score] || "Bravo‚Ä¶ ou d√©sol√©, on sait plus trop.";
      document.getElementById("quizQuestion").innerText = "Quiz termin√© !";
      document.getElementById("quizAnswers").innerHTML =
        `<p>Tu as eu ${score} bonne(s) r√©ponse(s) sur ${shuffledQuestions.length}.</p><p>${commentaire}</p>`;
      document.getElementById("nextBtn").style.display = "none";
    }

    window.onload = () => {
      afficherAccroches();
      chargerQuestions();
    };
  </script>
</body>
</html>
